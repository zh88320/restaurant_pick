{% extends "base.html" %}
{% block content %}
<section class="lottery">
  <form method="POST">
    <label>æƒ³åƒé¡å‹ï¼š
      <select name="category">
        <option value="">ä¸é™</option>
        {% for c in categories %}<option>{{ c }}</option>{% endfor %}
      </select>
    </label>
    <label>åƒ¹ä½ï¼š
      <select name="price">
        <option value="">ä¸é™</option>
        {% for p in prices %}<option>{{ p }}</option>{% endfor %}
      </select>
    </label>
    <label>ä½ç½®ï¼š
      <select name="location">
        <option value="">ä¸é™</option>
        {% for l in locations %}<option>{{ l }}</option>{% endfor %}
      </select>
    </label>
    <button class="primary" name="action" value="random">ğŸ² æŠ½ä¸€é–“</button>
    <button class="primary" name="action" value="list">ğŸ“‹ é¡¯ç¤ºå…¨éƒ¨</button>
  </form>
  {% if choices %}
    {% for choice in choices %}
      <article class="result">
        <h2>{{ choice.name }}</h2>
        <p>{{ choice.category }}ï½œ{{ choice.price_range }}</p>
        <p>{{ choice.location }}</p>
        {% if choice.website %}
          <a href={{ choice.website }}>{{ choice.website }}</a>
        {% endif %}
        {% if current_user.is_authenticated %}
          <form method="POST" action="{{ url_for('toggle_favorite', rid=choice.id) }}">
            <button class="favorite">â­ åŠ å…¥ / å–æ¶ˆæ”¶è—</button>
          </form>
        {% endif %}
      </article>
    {% endfor %}
  {% endif %}
</section>
{% endblock %}